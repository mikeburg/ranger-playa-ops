version: '3.7'

# JWT secret - used for login authentication
# Generated by the api backend command 'php artisan jwt:secret'
# or copy from the AWS Fargate environment variable JWT_SECRET.

x-jwt-secret: &jwt_secret "JWT SECRET HERE"

# Password to the mysql database
x-db-password: &db_password "DB PASSWORD HERE"

#
# SMTP relay server
#
x-smtp-server: &smtp_server "email-smtp.us-west-2.amazonaws.com"
x-smtp-username: &smtp_username "SES Username here"
x-smtp-password: &smtp_password "SES password here"

# **************************************
# Do not touch anything below this line
# **************************************

services:
  # API Backend
  api:
    environment:
      RANGER_DB_PASSWORD: *db_password
      JWT_SECRET: *jwt_secret

  # Classic Clubhouse
  classic:
    environment:
      RANGER_DB_PASSWORD: *db_password
      JWT_SECRET: *jwt_secret

  #MySQL Service
  db:
    environment:
      MYSQL_PASSWORD: *db_password
      MYSQL_ROOT_PASSWORD: "dustysecrets!"

  # SMTP Relay Server
  smtpd:
    environment:
      RELAYHOST_USERNAME: *smtp_username
      RELAYHOST_PASSWORD: *smtp_password
